<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Your Cart — HealthBoom Pharmaceuticals</title>
  <link rel="icon" href="/img/favicon.png">
  <link href="../styles/output.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>

<body class="font-sans antialiased text-gray-800">
  <!-- Topbar -->
  <header class="bg-primary py-2 px-4 md:px-8 lg:px-16 xl:px-32">
    <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-2">
      <p class="font-semibold text-white text-xs md:text-sm text-center md:text-left">
        5, Moshood Bakare Street Gbagada, Lagos, Nigeria
      </p>
      <p class="font-semibold text-white text-xs md:text-sm text-center md:text-right">
        Need Help? Call: +2348038612666
      </p>
    </div>
  </header>

  <!-- Nav -->
    <nav class="bg-white shadow-md py-4 px-4 md:px-8 lg:px-16 xl:px-32 relative z-40">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <a href="/" rel="home" class="shrink-0">
                <img src="/img/site-logo.png" alt="HealthBoom Website" class="h-16 w-auto">
            </a>

            <button id="mobile-menu-button" class="md:hidden text-primary text-3xl" aria-expanded="false" aria-controls="nav-links">
                <i class="fas fa-bars"></i>
            </button>

            <!-- Mobile menu is absolute; desktop is static -->
            <ul id="nav-links"
                class="hidden md:flex flex-wrap gap-2 md:gap-4 lg:gap-6 font-bold uppercase text-primary
                    md:static md:h-auto md:w-auto md:bg-transparent md:shadow-none
                    absolute inset-x-0 top-full bg-white shadow-md border-t border-gray-100
                    flex-col md:flex-row px-4 py-4 z-50">
            <li><a href="/" class="hover:text-secondary py-2">Home</a></li>
            <li><a href="/about.html" class="hover:text-secondary py-2">About Us</a></li>
            <li><a href="/service.html" class="hover:text-secondary py-2">Our Service</a></li>
            <li><a href="/blog.html" class="hover:text-secondary py-2">Health Blog</a></li>
            <li><a href="/shop.html" class="hover:text-secondary py-2">Shop</a></li>
            <li><a href="/contactus.html" class="hover:text-secondary py-2">Contact Us</a></li>
            </ul>
        </div>
    </nav>

  <!-- Hero / Breadcrumb -->
  <section class="bg-amber-100 bg-[url(/img/site-hero-white.png)] md:bg-[url(/img/inner-banner-1.png)] bg-cover bg-center bg-no-repeat">
    <div class="max-w-7xl mx-auto px-4 md:px-16 lg:px-0 py-16 md:py-24 text-center">
      <h1 class="font-bold text-3xl md:text-5xl text-primary">Your Cart</h1>
      <p class="mt-3 text-sm md:text-base">
        <a href="/" class="text-accent font-semibold">Home /</a>
        <span class="font-semibold text-primary"> Cart</span>
      </p>
    </div>
  </section>

  <!-- Cart -->
  <main class="py-10">
    <div class="max-w-7xl mx-auto px-4 md:px-8 lg:px-16 xl:px-0 grid grid-cols-1 lg:[grid-template-columns:2fr_1fr] gap-8">
      <!-- Items -->
      <section class="space-y-4">
        <div id="cart-empty" class="hidden border border-dashed border-gray-300 rounded-lg p-8 text-center">
          <i class="fa-regular fa-face-frown text-4xl text-gray-400"></i>
          <h2 class="mt-3 text-xl font-bold text-primary">Your cart is empty</h2>
          <p class="text-gray-600 text-sm mt-1">Browse our store and add products to your cart.</p>
          <a href="/shop.html" class="inline-flex items-center gap-2 bg-primary text-white px-5 h-11 rounded-md mt-4  hover:scale-95 hover:bg-accent duration-300 ease-out">
            <i class="fa-solid fa-shop"></i> Go to Shop
          </a>
        </div>

        <div id="cart-list" class="space-y-3">
          <!-- JS renders item rows here -->
        </div>

        <!-- Coupon -->
        <div class="mt-4 flex flex-col sm:flex-row items-start sm:items-center gap-3">
          <div class="relative">
            <label for="coupon" class="sr-only">Coupon</label>
            <input id="coupon" type="text" placeholder="Coupon code"
                   class="h-11 w-64 rounded-md border border-gray-300 pl-4 pr-24 focus:outline-none focus:ring-2 focus:ring-accent/70 uppercase">
            <button id="applyCoupon" class="absolute cursor-pointer right-1 top-1/2 -translate-y-1/2 h-9 px-3 rounded bg-primary
              hover:scale-95 hover:bg-accent duration-300 ease-out text-white text-sm">
              Apply
            </button>
          </div>
          <p id="couponMsg" class="text-sm"></p>
        </div>

        <div class="flex items-center gap-3 pt-2">
          <a href="/shop.html" class="text-primary cursor-pointer hover:text-accent font-semibold inline-flex items-center gap-2">
            <i class="fa-solid fa-arrow-left"></i> Continue Shopping
          </a>
          <button id="clearCart" class="text-red-600 cursor-pointer hover:text-red-700 font-semibold inline-flex items-center gap-2">
            <i class="fa-solid fa-trash-can"></i> Clear Cart
          </button>
        </div>
      </section>

      <!-- Summary -->
      <aside class="bg-white border border-gray-200 rounded-lg p-6 h-fit sticky top-24">
        <h3 class="text-primary text-lg font-bold mb-4">Order Summary</h3>

        <dl class="space-y-2 text-sm">
          <div class="flex justify-between"><dt class="text-gray-600">Subtotal</dt><dd id="sum-subtotal" class="font-semibold">₦0</dd></div>
          <div class="flex justify-between"><dt class="text-gray-600">Discount</dt><dd id="sum-discount" class="font-semibold text-emerald-700">₦0</dd></div>
          <div class="flex justify-between"><dt class="text-gray-600">Shipping</dt><dd id="sum-shipping" class="font-semibold">₦0</dd></div>
          <!-- <div class="flex justify-between"><dt class="text-gray-600">Tax</dt><dd id="sum-tax" class="font-semibold">₦0</dd></div> -->
          <div class="border-t pt-2 flex justify-between text-base font-bold">
            <dt>Total</dt><dd id="sum-total">₦0</dd>
          </div>
        </dl>

        <a id="checkoutBtn" href="/checkout.html"
           class="mt-5 block w-full h-12 bg-accent text-white font-semibold rounded-md grid place-items-center hover:opacity-95 hover:scale-95 hover:bg-primary duration-300 ease-out">
          Proceed to Checkout
        </a>

        <p class="mt-3 text-xs text-gray-500">
          Free shipping on orders over <span class="font-semibold">₦50,000</span>. Coupons: <code>HEALTH10</code> (10% off), <code>FREESHIP</code>.
        </p>
      </aside>
    </div>
  </main>

  <!-- CTA band -->
<section class="w-full bg-accent">
    <div class="grid grid-cols-1 md:grid-cols-2 max-w-7xl mx-auto place-items-center gap-4 px-4 md:px-8 lg:px-16 xl:px-0 py-10">
      <div class="text-center md:text-left">
        <p class="text-white font-medium text-base italic">24 hours Available</p>
        <h2 class="text-white font-semibold text-2xl md:text-4xl leading-snug">
          Any Emergency? Call us Any Time
        </h2>
      </div>
      <a href="tel:+2348038612666"
         class="bg-orange-400 md:justify-self-end h-12 w-56 md:w-64 rounded-md grid place-items-center 
          hover:scale-95 hover:bg-primary duration-300 ease-out text-white text-lg font-bold">
        +2348038612666
      </a>
    </div>
  </section>

  <!-- Footer top -->
  <section class="bg-indigo-950 p-4">
    <div class="relative z-0 bg-indigo-950 py-16 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 max-w-7xl mx-auto h-auto px-4 md:px-8 lg:px-0">
      <div class="text-white">
        <a href="/"><img src="/img/site-logo-white.png" alt="HealthBoom Logo" class="h-20 mb-4" /></a>
        <div class="flex items-start gap-3 mb-3">
          <i class="fas fa-map-marker-alt text-red-500 mt-1"></i>
          <p>5, Moshood Bakare Street,<br/>Gbagada, Lagos, Nigeria.</p>
        </div>
        <div class="flex items-center gap-3 mb-3">
          <i class="fas fa-phone-alt text-red-500"></i>
          <p>+2348038612666<br/>+2348078552299</p>
        </div>
        <div class="flex items-center gap-3">
          <i class="fas fa-envelope text-red-500"></i>
          <p>info@healthboompharm.com</p>
        </div>
      </div>

      <div>
        <h4 class="text-white font-bold text-2xl">Explore</h4>
        <ul class="mt-5 space-y-3">
          <li><a href="/" class="text-white/90 hover:text-white">Home</a></li>
          <li><a href="/about.html" class="text-white/90 hover:text-white">About us</a></li>
          <li><a href="/service.html" class="text-white/90 hover:text-white">Services</a></li>
          <li><a href="/shop.html" class="text-white/90 hover:text-white">Store</a></li>
          <li><a href="/contactus.html" class="text-white/90 hover:text-white">Contact us</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-white font-bold text-2xl">Links</h4>
        <ul class="mt-5 space-y-3">
          <li><a href="/appointment.html" class="text-white/90 hover:text-white">Make An Appointment</a></li>
          <li><a href="mailto:info@healthboompharm.com" class="text-white/90 hover:text-white">Mail</a></li>
          <li><a href="/faq.html" class="text-white/90 hover:text-white">FAQ</a></li>
          <li><a href="/privacy.html" class="text-white/90 hover:text-white">Privacy Policy</a></li>
          <li><a href="/terms.html" class="text-white/90 hover:text-white">Terms & Conditions</a></li>
        </ul>
      </div>

      <div>
        <h4 class="text-white font-bold text-2xl">Subscribe</h4>
        <p class="mt-5 text-white/80 text-sm">Subscribe to get the latest news from us.</p>
        <form action="#" class="relative w-full max-w-xs bg-white mt-4 rounded-md">
          <label for="footer-email" class="sr-only">Email</label>
          <input type="email" id="footer-email" name="email" placeholder="Enter your email"
                 class="w-full h-10 pl-4 pr-10 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"/>
          <i class="fa-solid fa-envelope absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
        </form>
        <div class="flex space-x-4 text-white text-xl mt-5">
          <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f hover:text-blue-500"></i></a>
          <a href="#" aria-label="Twitter"><i class="fab fa-twitter hover:text-sky-400"></i></a>
          <a href="#" aria-label="Instagram"><i class="fab fa-instagram hover:text-pink-500"></i></a>
          <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in hover:text-blue-400"></i></a>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer bottom -->
  <footer class="bg-red-600 w-full text-blue-50">
    <div class="max-w-7xl mx-auto px-4 md:px-8 lg:px-16 xl:px-0 h-12 flex flex-col md:flex-row items-center justify-center gap-2 text-[11px] md:text-[14px]">
      <p class="text-center">© 2021–2025 HealthBoom Pharmaceuticals. All Rights Reserved.</p>
      <p>Designed by <span class="ml-1 text-white font-semibold">DigitalPool</span></p>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    // Mobile menu toggle (matches nav markup)
    (function () {
      const btn = document.getElementById('mobile-menu-button');
      const menu = document.getElementById('nav-links');
      if (!btn || !menu) return;
      const links = menu.querySelectorAll('a');
      function openMenu(){ menu.classList.remove('hidden'); menu.classList.add('flex','flex-col'); btn.setAttribute('aria-expanded','true'); }
      function closeMenu(){ menu.classList.add('hidden'); btn.setAttribute('aria-expanded','false'); }
      btn.addEventListener('click', ()=> menu.classList.contains('hidden') ? openMenu() : closeMenu());
      links.forEach(a => a.addEventListener('click', ()=> { if (innerWidth < 768) closeMenu(); }));
      addEventListener('resize', ()=> { if (innerWidth >= 768){ menu.classList.remove('hidden','flex','flex-col'); } else { menu.classList.add('hidden'); } });
    })();

    // --- Cart Logic (localStorage: hb_cart) ---
    (function(){
      const listEl = document.getElementById('cart-list');
      const emptyEl = document.getElementById('cart-empty');
      const subtotalEl = document.getElementById('sum-subtotal');
      const discountEl = document.getElementById('sum-discount');
      const shippingEl = document.getElementById('sum-shipping');
      const totalEl = document.getElementById('sum-total');
      const clearBtn = document.getElementById('clearCart');
      const couponInput = document.getElementById('coupon');
      const applyCouponBtn = document.getElementById('applyCoupon');
      const couponMsg = document.getElementById('couponMsg');

      const FREE_SHIP_THRESHOLD = 50000; // ₦
      const SHIPPING_FLAT = 2000;        // ₦
      let coupon = null;                 // 'HEALTH10' or 'FREESHIP'

      function money(n){ return '₦' + (Math.round(n)).toLocaleString(); }

      function getCart(){
        try { return JSON.parse(localStorage.getItem('hb_cart')) || []; }
        catch(_) { return []; }
      }
      function setCart(items){
        localStorage.setItem('hb_cart', JSON.stringify(items));
      }

      function render(){
        const items = getCart();
        if (!items.length){
          emptyEl.classList.remove('hidden');
          listEl.innerHTML = '';
          updateSummary([]);
          return;
        }
        emptyEl.classList.add('hidden');

        listEl.innerHTML = items.map(item => {
          const subtotal = item.price * item.qty;
          return `
          <div class="border border-gray-200 rounded-lg p-4 flex items-center gap-4 bg-white">
            <img src="${item.img || '/img/products/placeholder.png'}" alt="" class="h-20 w-20 object-cover rounded">
            <div class="flex-1 min-w-0">
              <h4 class="font-semibold text-primary truncate">${item.name}</h4>
              <p class="text-xs text-gray-500 mt-0.5">Unit price: <span class="font-medium">${money(item.price)}</span></p>
              <div class="mt-2 flex items-center gap-3">
                <div class="inline-flex items-center border rounded-md">
                  <button class="px-3 h-9" data-act="dec" data-id="${item.id}" aria-label="Decrease">−</button>
                  <input type="number" min="1" value="${item.qty}" data-id="${item.id}"
                         class="w-12 h-9 text-center border-l border-r outline-none" />
                  <button class="px-3 h-9" data-act="inc" data-id="${item.id}" aria-label="Increase">+</button>
                </div>
                <button class="text-red-600 hover:text-red-700 font-semibold" data-act="remove" data-id="${item.id}">
                  Remove
                </button>
              </div>
            </div>
            <div class="text-right">
              <p class="text-sm text-gray-500">Subtotal</p>
              <p class="text-lg font-bold">${money(subtotal)}</p>
            </div>
          </div>`;
        }).join('');

        // Bind events
        listEl.querySelectorAll('[data-act="inc"]').forEach(b => b.addEventListener('click', onInc));
        listEl.querySelectorAll('[data-act="dec"]').forEach(b => b.addEventListener('click', onDec));
        listEl.querySelectorAll('[data-act="remove"]').forEach(b => b.addEventListener('click', onRemove));
        listEl.querySelectorAll('input[type="number"]').forEach(inp => inp.addEventListener('change', onQtyInput));

        updateSummary(items);
      }

      function updateSummary(items){
        const subtotal = items.reduce((s, it) => s + it.price * it.qty, 0);
        let discount = 0;
        let shipping = subtotal >= FREE_SHIP_THRESHOLD ? 0 : SHIPPING_FLAT;
        if (coupon === 'HEALTH10') discount = 0.10 * subtotal;
        if (coupon === 'FREESHIP') shipping = 0;
        const total = Math.max(0, subtotal - discount) + (subtotal ? shipping : 0);

        subtotalEl.textContent = money(subtotal);
        discountEl.textContent = discount ? ('− ' + money(discount)) : '₦0';
        shippingEl.textContent = subtotal ? money(shipping) : '₦0';
        totalEl.textContent = money(total);
      }

      function onInc(e){
        const id = e.currentTarget.getAttribute('data-id');
        const items = getCart();
        const it = items.find(x => String(x.id) === String(id));
        if (it){ it.qty++; setCart(items); render(); }
      }
      function onDec(e){
        const id = e.currentTarget.getAttribute('data-id');
        const items = getCart();
        const it = items.find(x => String(x.id) === String(id));
        if (it){ it.qty = Math.max(1, it.qty - 1); setCart(items); render(); }
      }
      function onRemove(e){
        const id = e.currentTarget.getAttribute('data-id');
        const items = getCart().filter(x => String(x.id) !== String(id));
        setCart(items); render();
      }
      function onQtyInput(e){
        const id = e.currentTarget.getAttribute('data-id');
        let val = parseInt(e.currentTarget.value, 10);
        if (isNaN(val) || val < 1) val = 1;
        const items = getCart();
        const it = items.find(x => String(x.id) === String(id));
        if (it){ it.qty = val; setCart(items); render(); }
      }

      clearBtn.addEventListener('click', () => { setCart([]); render(); });

      applyCouponBtn.addEventListener('click', () => {
        const code = (couponInput.value || '').trim().toUpperCase();
        if (!code){ coupon = null; couponMsg.textContent = ''; render(); return; }
        if (code === 'HEALTH10' || code === 'FREESHIP'){
          coupon = code;
          couponMsg.textContent = code === 'HEALTH10' ? 'Coupon applied: 10% off.' : 'Coupon applied: Free shipping.';
          couponMsg.className = 'text-sm text-emerald-700';
        } else {
          coupon = null;
          couponMsg.textContent = 'Invalid coupon code.';
          couponMsg.className = 'text-sm text-red-600';
        }
        render();
      });

      // initial draw
      render();
    })();
  </script>

  <!-- Optional: Add-to-cart helper (use this on product pages, not here) -->
  <script>
    // Example function you can reuse on product cards:
    // addToCart({ id: 'sku-123', name: 'Vitamin C', price: 3500, img: '/img/f5.png' }, true)
    function addToCart(product, redirect){
      try {
        const key = 'hb_cart';
        const cart = JSON.parse(localStorage.getItem(key)) || [];
        const found = cart.find(it => String(it.id) === String(product.id));
        if (found){ found.qty += (product.qty || 1); }
        else { cart.push({ id: product.id, name: product.name, price: product.price, img: product.img || '', qty: product.qty || 1 }); }
        localStorage.setItem(key, JSON.stringify(cart));
        if (redirect) window.location.href = '/cart.html';
      } catch(e) { console.error('Cart error:', e); }
    }
  </script>
</body>
</html>
